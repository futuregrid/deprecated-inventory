{% extends "layout.html" %}
{% from "_helper.html" import image_button %}g
{% block content %}

<script type="text/javascript">

function killall(cloud) {
	var answer = confirm("Delete all selected VMs in "+cloud+"?")
	if (answer){
		window.location = "/cm/delete/"+cloud+"/";
	}
}

</script>


<table>
  <tr>
    <th colspan="5"> Cloud Mesh - Inventory </th>  
  <tr> <td colspan=5> Updated {{ updated }}
    <select>
      <option value="">Bulk select...</option>
      {% for choice in inventory.service_choices %}
          <option value="bulk-{{ choice }}"">
	    {{  choice }}
	  </option>
      {% endfor %}
    </select>


  </td></tr>
  <tr>
    <th> </th>
    <th> Name </th>
    <th> Status </th>
    <th> Services </th>
    <th> IP </th>
  </tr>
  
  {% for server in inventory.servers()|sort(attribute='name') %}
  
  <tr>
  <td> <input name="checkbox" value="{{ server.name }}" type="checkbox"> </td>
  <td> {{ server.name }} </td>
  <td> {{ server.status }} </td>
  <td>
    <select>
      <option value="" 
        {% if not server.data.services %}
          selected="selected"
        {% endif %}>Select...</option>
      {% for service in inventory.service_choices %}
      <option value="{{ server.name }}-{{ service }}"
        {% if server.services and server.services[0].subkind == service %}
          selected="selected"
        {% endif %}>{{ service }}</option>
      {% endfor %}
    </select>
  </td>
  <td> {{ server.ip_address }} </td>
  </tr>

  {% endfor %}
  
</table>

{% endblock %}
